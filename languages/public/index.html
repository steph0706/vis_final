<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Languages of the World</title>
  <!-- <meta name="description" content="Scrollama Demo: Sticky JS"> -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="scroll.css">


</head>

<body>
  <section id='intro'>
    <h1 class='intro__hed'>Languages of the World</h1>
    <div class="introp">
      <p class='intro__dek'>
        <p>The world is home to approximately 7000 living languages. In an increasingly globalized world, we find that cultural exchange and interaction becomes more commonplace. As such, the need to study foreign languages for both personal and career development rises. This project provides insight to the current linguistic landscape of the world, with the goal of increasing historical intuition and cultural awareness.</p>
          <p>Language and culture are deeply interconnected concepts which tie in to individual identities. In the end, every individualâ€™s identity is molded by our environment. By being cognizant of cultural diversity, we, as human beings, can further increase mutual understanding, leading to a more harmonious world.</p>
      </p>
    </div>
  </section>

  <section id='quotePage'>
    <h1 id='quote'>"Language and culture are dimensions of each other, interrelated and inseparable"</h1>
    <h5 id='author'>- Alvino E. Fantini</h5>
  </section>

  <!------------------------------------------------- SECTION MAP----- ------------------------------------------------------------>
  <section id='scroll'>
    <div class='scroll__graphic sticky' id="root"></div>
    <div class='scroll__text'>
      <div class='step' data-step='1'>
        <p>Talk about English as number 1</p>
      </div>
      <div class='step' data-step='2'>
        <p>Contrast with English, Mandarin is #1 spoken langauge but covers a lot less area</p>
      </div>
    </div>
  </section>
  <section id='outro'></section>
  
  <!---------------------------------------------- SECTION TREE ---------------------------------------------------------------->

  <section id=scroll>
    <div class='scroll__graphic sticky' id="tree"></div>
    <div class='scroll__text'>
      <div class="nonscrollstep" data-step='1'>
        <p>Talk about distribution of languages amongst language families</p>
      </div>
    </div>
  </section>
  <section id='outro'></section>

  <!---------------------------------------------- SECTION SANKEY ---------------------------------------------------------------->

  <section id=scroll>
    <div class='scroll__graphic sticky' id="sankey"></div>
    <div class='scroll__text'>
      <div class="nonscrollstep" data-step='1'>
        <p>Talk about speakers per langauge</p>
      </div>
    </div>
  </section>
  <section id='outro'></section>

  <!---------------------------------------------- SECTION BUBBLE ---------------------------------------------------------------->

  <section id=scrollbubble>
    <div class='scroll__graphic sticky' id="bubblechart"></div>
    <div class='scroll__text'>
      <div class="nonscrollstep" data-step='1'>
        <p>Most of the world's languages are spoken by less than 100,000 people. <br />Only 83 languages out of 7,099 languages are spoken by more than 10,000,000 people. Only 23 languages account for more than half the world's population</p>
        <p>Roughly a third of the world's languages are endangered, with less than 1,000 speakers remaining. One language dies every two weeks.</p>
        <p>Hover to explore the number of languages organized by number of speakers</p>
      </div>
    </div>
  </section>
  <section id='outro'></section>


  <!------------------------------------------------- SECTION BAR ---------------------------------------------------------------->
  <section id='scroll1'>
    <div class='scroll__graphic sticky' id="root1"></div>
    <div class='scroll__text1'>
      <div class='step1' data-step='3'>
        <p>L1 speakers are native speakers, whereas L2 speakers are second language speakers of a certain language.</p>
        <p>Chinese is the language with the most native speakers, with 1284 million native speakers</p>
      </div>
      <div class='step1' data-step='4'>
        <p>STEP 7</p>
      </div>
    </div>
  </section>
  <section id='outro'></section>

  <section id='closer'>
    <p>It is estimated that one language dies every two weeks. In a century, half of the currently existing languages will go extinct, marking the end of a culture and the wisdom that it carries.</p></br>
    <p>While we can, let's celebrate the rich diversity that exists in our world. Learn from your friends and your neighbors -- even the smallest things that we take for granted, like language, can carry significant amounts of knowledge.</p>
  </section>

  <script src='../d3.v4.min.js'></script>
  <script src='../stickyfill.min.js'></script>
  <script src='../scrollama.min.js'></script>
  <script id="scrollscript">
    var currentBox = -1;
    // using d3 for convenience
    var container = d3.select('#scroll');
    var graphic = container.select('.scroll__graphic');
    var text = container.select('.scroll__text');
    var step = text.selectAll('.step');
    // initialize the scrollama
    var scroller = scrollama();
    // generic window resize listener event
    function handleResize() {
      // 1. update height of step elements
      var stepHeight = Math.floor(window.innerHeight * 0.75);
      step.style('height', stepHeight + 'px');
      // 2. update width/height of graphic element
      var bodyWidth = d3.select('body').node().offsetWidth;
      var graphicMargin = 16 * 4;
      var textWidth = text.node().offsetWidth;
      var graphicWidth = container.node().offsetWidth - textWidth - graphicMargin;
      var graphicHeight = Math.floor(window.innerHeight * 0.7)
      var graphicMarginTop = Math.floor(graphicHeight * 0.3)
      graphic
        .style('width', graphicWidth + 'px')
        .style('height', graphicHeight + 'px')
        .style('top', graphicMarginTop + 'px');
      // 3. tell scrollama to update new element dimensions
      scroller.resize();
      d3.select("#bubblechart").style('width', graphicWidth + 'px')
        .style('height', Math.floor(window.innerHeight * 0.7) + 'px')
        .style('top', graphicMarginTop + 'px');
    }
    // scrollama event handlers
    function handleStepEnter(response) {
      // response = { element, direction, index }
      // add color to current step only
      currentBox = response.index;
      localStorage.setItem("boxId", currentBox);
      step.classed('is-active', function (d, i) {
        return i === response.index;
      })
    }
    function handleContainerEnter(response) {
      // response = { direction }

    }
    function handleContainerExit(response) {
      // response = { direction }

    }
    function setupStickyfill() {
      d3.selectAll('.sticky').each(function () {
        Stickyfill.add(this);
      });
    }
    function init() {


      
      setupStickyfill();
      // 1. force a resize on load to ensure proper dimensions are sent to scrollama
      handleResize();
      // 2. setup the scroller passing options
      // this will also initialize trigger observations
      // 3. bind scrollama event handlers (this can be chained like below)
      scroller.setup({
        container: '#scroll',
        graphic: '.scroll__graphic',
        text: '.scroll__text',
        step: '.scroll__text .step',
        offset: 0.33,
      })
        .onStepEnter(handleStepEnter)
        .onContainerEnter(handleContainerEnter)
        .onContainerExit(handleContainerExit);
      // setup resize event
      window.addEventListener('resize', handleResize);
    }
    // kick things off
    init();
  </script>

  <script id="scrollscript1">
    var currentBox1 = -1;
    // using d1 for convenience
    var container1 = d3.select('#scroll1');
    var graphic1 = container1.select('.scroll__graphic');
    var text1 = container1.select('.scroll__text1');
    var step1 = text1.selectAll('.step1');
    // initialize the scrollama
    var scroller1 = scrollama();
    // generic window resize listener event
    function handleResize1() {
      // 1. update height of step elements
      var stepHeight1 = Math.floor(window.innerHeight * 0.75);
      step1.style('height', stepHeight1 + 'px');
      // 1. update width/height of graphic element
      var bodyWidth = d3.select('body').node().offsetWidth;
      var graphicMargin = 16 * 4;
      var textWidth = text1.node().offsetWidth;
      var graphicWidth = container1.node().offsetWidth - textWidth - graphicMargin;
      var graphicHeight = Math.floor(window.innerHeight * 0.7)
      var graphicMarginTop = Math.floor(graphicHeight * 0.15)
      graphic1
        .style('width', graphicWidth + 'px')
        .style('height', graphicHeight + 'px')
        .style('top', graphicMarginTop + 'px');
      // 1. tell scrollama to update new element dimensions
      scroller1.resize();
      console.log(graphicMarginTop);
    }
    // scrollama event handlers
    function handleStepEnter1(response) {
      // response = { element, direction, index }
      // add color to current step only
      currentBox1 = response.index + 2  ;
      localStorage.setItem("boxId", currentBox1);

      step1.classed('is-active', function (d, i) {
        return i === response.index;

      })
    }
    function handleContainerEnter1(response) {
      // response = { direction }

    }
    function handleContainerExit1(response) {
      // response = { direction }
    }
    function setupStickyfill1() {
      d3.selectAll('.sticky1').each(function () {
        Stickyfill.add(this);
      });
    }
    function init1() {
      localStorage.setItem("boxId", -1);
      setupStickyfill1();
      // 1. force a resize on load to ensure proper dimensions are sent to scrollama
      handleResize1();
      // 1. setup the scroller passing options
      // this will also initialize trigger observations
      // 1. bind scrollama event handlers (this can be chained like below)
      scroller1.setup({
        container: '#scroll1',
        graphic: '.scroll__graphic1',
        text: '.scroll__text1',
        step: '.scroll__text1 .step1',
        offset: 0.33,
      })
        .onStepEnter(handleStepEnter1)
        .onContainerEnter(handleContainerEnter1)
        .onContainerExit(handleContainerExit1);
      // setup resize event
      window.addEventListener('resize', handleResize1);
    }
    // kick things off
    init1();
  </script>


</body>

</html>
